"use strict";function checkSupport(){var e="MozWebSocket"in window?"MozWebSocket":"WebSocket"in window?"WebSocket":null;return null===e?(Materialize.toast("Your browser doesn't support Websockets! You won't be able to use this service...",1e6,"warning-toast"),!1):!0}function processDisconnect(e){Materialize.toast("Server connection lost - please refresh",1e6,"warning-toast")}function processMessage(e){if(!addressLoaded){var s=JSON.parse(e.data);return $("#serverAddess").html(host),$("#mailAddress").html(s[0]),$("#serverPort").html(s[1]),$("#copyLink").attr("data-clipboard-text",s[0]),void(addressLoaded=!0)}var o=JSON.parse(e.data);messages.push(o),$("#noMessages").hide();var a='<li class="collection-item avatar"><i class="material-icons circle">mail</i><span class="title"><strong>'+o.subject+"</strong></span><p>"+o.from+"(at "+o.fromIP[0]+")<br>"+(new Date).toLocaleString()+'</p><a href="#!" class="secondary-content" title="View Raw Message"><i class="material-icons">code</i></a></li>';$("#messageCollection").prepend(a)}var host=window.location.hostname,messages=[],addressLoaded=!1;if(checkSupport()){var mailSocket=new WebSocket("ws://"+host+":9000");mailSocket.onmessage=processMessage,mailSocket.onclose=processDisconnect}var clipboard=new Clipboard("#copyLink");